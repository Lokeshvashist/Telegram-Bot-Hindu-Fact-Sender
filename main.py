import telegram
import datetime
import random
import time
import schedule

# ЁЯФР рддреЗрд░рд╛ рдмреЙрдЯ рдЯреЛрдХрди рдФрд░ рдЧреНрд░реБрдк ID
TOKEN = "8013164021:AAHMk4iH6Vh79DyNVkJuosxtRaDU9fQjx2Y"
CHAT_ID = -1002564868666  # @AstroTantraTalk group

bot = telegram.Bot(token=TOKEN)

# ЁЯМЮ рд╕рдирд╛рддрди рдзрд░реНрдо рдХреЗ рд░реЛрдЪрдХ рддрдереНрдп
facts = [
    "ЁЯХЙя╕П реР рдХрд╛ рдЙрдЪреНрдЪрд╛рд░рдг рдорд╕реНрддрд┐рд╖реНрдХ рдХреЛ рд╢рд╛рдВрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдзреНрдпрд╛рди рдореЗрдВ рд╕рд╣рд╛рдпрдХ рд╣реЛрддрд╛ рд╣реИред",
    "ЁЯФе рд╣рд╡рди рдХрд░рдиреЗ рд╕реЗ рд╡рд╛рдпреБрдордВрдбрд▓ рд╢реБрджреНрдз рд╣реЛрддрд╛ рд╣реИ тАФ рдпрд╣ рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд░реВрдк рд╕реЗ рд╕рд┐рджреНрдз рд╣реИред",
    "ЁЯМ┐ рддреБрд▓рд╕реА рдкреМрдзреЗ рдХреЗ рдкрд╛рд╕ рдмреИрдардирд╛ рддрдирд╛рд╡ рдХрдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдКрд░реНрдЬрд╛ рдмрдврд╝рд╛рддрд╛ рд╣реИред",
    "ЁЯУ┐ рд░реБрджреНрд░рд╛рдХреНрд╖ рдзрд╛рд░рдг рдХрд░рдиреЗ рд╕реЗ рд╣реГрджрдп рдФрд░ рдорди рд╢рд╛рдВрдд рд░рд╣рддрд╛ рд╣реИред",
    "ЁЯкФ рджреАрдкрдХ рдХреА рд▓реМ рдмреНрд░рд╣реНрдорд╛рдВрдбреАрдп рдЪреЗрддрдирд╛ рдХрд╛ рдкреНрд░рддреАрдХ рдорд╛рдиреА рдЧрдИ рд╣реИред",
    "ЁЯУЬ рднрдЧрд╡рджреНрдЧреАрддрд╛ рдЬреАрд╡рди рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░рд┐рдХ рджрд░реНрд╢рди рд╣реИ тАФ рдХреЗрд╡рд▓ рдпреБрджреНрдз рдирд╣реАрдВред",
    "ЁЯзШ рдзреНрдпрд╛рди рд╕реЗ рдЪрдХреНрд░ рдЬрд╛рдЧреГрдд рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдЖрддреНрдорд┐рдХ рдЙрдиреНрдирддрд┐ рд╣реЛрддреА рд╣реИред",
    "ЁЯЫХ рд╢рдВрдЦрдирд╛рдж рд╕реЗ рд╡рд╛рдпреБрдордВрдбрд▓ рдХреА рдирдХрд╛рд░рд╛рддреНрдордХрддрд╛ рджреВрд░ рд╣реЛрддреА рд╣реИред"
]

# ЁЯОЙ рддреНрдпреЛрд╣рд╛рд░реЛрдВ рдХреА рд▓рд┐рд╕реНрдЯ (MM-DD format)
festivals_by_date = {
    "07-06": "ЁЯЪй *рдЖрдЬ рдЬрдЧрдиреНрдирд╛рде рд░рде рдпрд╛рддреНрд░рд╛* рд╣реИ тАФ рднрдЧрд╡рд╛рди рдХреЛ рдорди рд╕реЗ рдЦреАрдВрдЪреЛ, рдкреБрдгреНрдп рдЕрдирдВрдд рд╣реЛрдЧрд╛ред",
    "08-19": "ЁЯМЩ *рдЖрдЬ рд╢реНрд░реАрдХреГрд╖реНрдг рдЬрдиреНрдорд╛рд╖реНрдЯрдореА* рд╣реИ тАФ рд░рд╛рддреНрд░рд┐ 12 рдмрдЬреЗ рддрдХ рд╡реНрд░рдд рд░рдЦреЗрдВ рдФрд░ рдзреНрдпрд╛рди рдХрд░реЗрдВред",
    "10-12": "ЁЯМ║ *рдЖрдЬ рджреБрд░реНрдЧрд╛ рдЕрд╖реНрдЯрдореА* рд╣реИ тАФ рдХрдиреНрдпрд╛ рдкреВрдЬрди рдХрд░реЗрдВ, рдорд╛рдБ рдХреА рдХреГрдкрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред",
    "10-23": "ЁЯФе *рдЖрдЬ рджрд╢рд╣рд░рд╛* рд╣реИ тАФ рд░рд╛рд╡рдг рджрд╣рди рд╕реЗ рдкрд╣рд▓реЗ рдЕрдкрдиреЗ рднреАрддрд░ рдХреЗ рд░рд╛рд╡рдг рдХреЛ рдЬрд▓рд╛рдПрдВред"
    # тЬи рдФрд░ рддреНрдпреЛрд╣рд╛рд░ рдЬреЛрдбрд╝рдиреЗ рд╣реЛ рддреЛ рдЗрд╕реА рдлрд╝реЙрд░реНрдореЗрдЯ рдореЗрдВ рдбрд╛рд▓ рд╕рдХрддреЗ рд╣реЛ
}

# ЁЯХпя╕П рдореИрд╕реЗрдЬ рднреЗрдЬрдиреЗ рдХрд╛ рдлрдВрдХреНрд╢рди
def send_daily_fact():
    today = datetime.datetime.now().strftime("%m-%d")
    fact = random.choice(facts)
    text = f"ЁЯУ┐ *рдЖрдЬ рдХрд╛ рд╕рдирд╛рддрди рддрдереНрдп:*\n\n{fact}"

    # рдЕрдЧрд░ рдЖрдЬ рддреНрдпреЛрд╣рд╛рд░ рд╣реИ рддреЛ рдЬреЛрдбрд╝реЛ
    if today in festivals_by_date:
        text += f"\n\nЁЯОЙ *рддреНрдпреЛрд╣рд╛рд░ рд╡рд┐рд╢реЗрд╖:*\n{festivals_by_date[today]}"

    # рднреЗрдЬреЛ!
    bot.send_message(chat_id=CHAT_ID, text=text, parse_mode=telegram.ParseMode.MARKDOWN)

# тП▒я╕П рд╕рдордп рдЬрд╛рдВрдЪ: рд╕рд┐рд░реНрдл рд╕реБрдмрд╣ 6-8 рдФрд░ рд╢рд╛рдо 6-8 рдХреЗ рдмреАрдЪ рднреЗрдЬреЗрдВ
def scheduler():
    now = datetime.datetime.now()
    hour = now.hour
    if (6 <= hour < 8) or (18 <= hour < 20):
        send_daily_fact()

# тП│ рд╣рд░ 30 рдорд┐рдирдЯ рдореЗрдВ рдЪреЗрдХ рдХрд░реЛ
schedule.every(30).minutes.do(scheduler)

# ЁЯФБ рдмреЙрдЯ рдЪрд╛рд▓реВ рд░рдЦреЛ
while True:
    schedule.run_pending()
    time.sleep(5)
